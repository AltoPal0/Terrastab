<!DOCTYPE html>
<html>
<head>
    <title>Debug Admin Token</title>
</head>
<body>
    <h1>Debug Admin Token</h1>
    <button onclick="checkToken()">Check Stored Token</button>
    <div id="result"></div>

    <script>
        function checkToken() {
            const token = localStorage.getItem('terrastab_admin_token');
            const result = document.getElementById('result');

            if (token) {
                result.innerHTML = `
                    <h3>Token Found:</h3>
                    <p><strong>Token:</strong> ${token}</p>
                    <p><strong>Length:</strong> ${token.length}</p>
                    <p><strong>Starts with admin_:</strong> ${token.startsWith('admin_')}</p>
                    <p><strong>Parts:</strong> ${token.split('_').length}</p>

                    <h3>Token Parts:</h3>
                    ${token.split('_').map((part, i) => `<p><strong>Part ${i}:</strong> ${part}</p>`).join('')}

                    <h3>Timestamp Analysis:</h3>
                    ${analyzeTimestamp(token)}
                `;
            } else {
                result.innerHTML = '<p>No token found in localStorage</p>';
            }
        }

        function analyzeTimestamp(token) {
            const parts = token.split('_');
            if (parts.length >= 3) {
                const timestamp = parseInt(parts[1]);
                const now = Date.now();
                const age = now - timestamp;
                const ageHours = age / (1000 * 60 * 60);

                return `
                    <p><strong>Timestamp:</strong> ${timestamp}</p>
                    <p><strong>Created:</strong> ${new Date(timestamp).toLocaleString()}</p>
                    <p><strong>Age:</strong> ${ageHours.toFixed(2)} hours</p>
                    <p><strong>Valid (< 24h):</strong> ${ageHours < 24}</p>
                `;
            }
            return '<p>Invalid token format</p>';
        }
    </script>
</body>
</html>